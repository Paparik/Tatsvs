@model Tatsvs.Models.Entrance;

<div class="container">
    <div class="map">
        <ul class="map__nav">
            <li class="button">
                Объекты
            </li>
            <li class="button button_active">
                Кабельная канализация
            </li>
        </ul>
        <div class="map__search">
            <svg width="23" height="23" viewBox="0 0 23 23" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M10.1111 4.41667C13.256 4.41667 15.8056 6.96616 15.8056 10.1111M16.5559 16.5514L21.5 21.5M19.2222 10.1111C19.2222 15.1431 15.1431 19.2222 10.1111 19.2222C5.07918 19.2222 1 15.1431 1 10.1111C1 5.07918 5.07918 1 10.1111 1C15.1431 1 19.2222 5.07918 19.2222 10.1111Z" stroke="black" stroke-opacity="0.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <input id="search" type="text" placeholder="Поиск">
        </div>
        <div class="map__main">
            <div id="map" ></div>
        </div>
    </div>
</div>

<script>
    var app = new Vue({
        el: '.wrapper',
        data: {
            colors: ['FF5555', '3BC171', '5194BA', '7351BA', 'C02C61', 'C18B3B'],
            closetsColor: {

            },
            entrances: {
                0: {
                    aparts: [
                        ["1", '1-110кв', false, '1abc'],
                        ["2", '1-110кв', false, '1abc'],
                        ["3", '1-110кв', false, '1abc'],
                        ["4", '1-110кв', false, '1abc'],
                        ["5", '1-110кв', true, '1abc'],
                        ["6", '1-110кв', false, '1abc'],
                        ["7", '1-110кв', false, '1abc'],
                        ["8", '1-110кв', false, '1abc'],
                        ["9", '1-110кв', false, '1abc'],
                        ["10", '1-110кв', true, '1abc'],
                        ["11", '1-110кв', false, '1abc'],
                        ["12", '1-110кв', false, '1abc'],
                        ["13", '1-110кв', false, '2abc'],
                        ["14", '1-110кв', false, '2abc'],
                        ["15", '1-110кв', true, '2abc'],
                        ["16", '1-110кв', false, '2abc'],
                        ["17", '1-110кв', false, '2abc'],
                        ["18", '1-110кв', false, '2abc'],
                        ["19", '1-110кв', false, '2abc'],
                    ],
                    closets: { bottom: '1abc', top: '2abc' }
                },
                1: {
                    aparts: [
                        ["1", '1-110кв', false, '1abc'],
                        ["2", '1-110кв', false, '1abc'],
                        ["3", '1-110кв', false, '1abc'],
                        ["4", '1-110кв', true, '1abc'],
                        ["5", '1-110кв', false, '1abc'],
                        ["6", '1-110кв', false, '1abc'],
                        ["7", '1-110кв', false, '1abc'],
                        ["8", '1-110кв', true, '1abc'],
                        ["9", '1-110кв', false, '1abc']
                    ],
                    closets: { bottom: '1abc', }
                },
                2: {
                    aparts: [
                        ["1", '1-110кв', false, '3abc'],
                        ["2", '1-110кв', false, '3abc'],
                        ["3", '1-110кв', false, '3abc'],
                        ["4", '1-110кв', true, '3abc'],
                        ["5", '1-110кв', false, '3abc'],
                        ["6", '1-110кв', false, '3abc'],
                        ["7", '1-110кв', false, '3abc'],
                        ["8", '1-110кв', true, '3abc'],
                        ["9", '1-110кв', false, '3abc']
                    ],
                    closets: { bottom: '3abc', }
                },
                3: {
                    aparts: [
                        ["1", '1-110кв', false, '3abc'],
                        ["2", '1-110кв', false, '3abc'],
                        ["3", '1-110кв', true, '3abc'],
                        ["4", '1-110кв', false, '3abc'],
                        ["5", '1-110кв', false, '3abc'],
                        ["6", '1-110кв', false, '3abc'],
                        ["7", '1-110кв', true, '3abc'],
                        ["8", '1-110кв', false, '3abc'],
                        ["9", '1-110кв', false, '3abc']
                    ],
                    closets: { bottom: '3abc', }
                },
                4: {
                    aparts: [
                        ["1", '1-110кв', false, '4abc'],
                        ["2", '1-110кв', false, '4abc'],
                        ["3", '1-110кв', true, '4abc'],
                        ["4", '1-110кв', false, '4abc'],
                        ["5", '1-110кв', false, '4abc'],
                        ["6", '1-110кв', true, '4abc'],
                        ["7", '1-110кв', false, '4abc'],
                        ["8", '1-110кв', false, '4abc'],
                        ["9", '1-110кв', false, '4abc']
                    ],
                    closets: { bottom: '4abc' }
                },
                5: {
                    aparts: [
                        ["1", '1-110кв', false, '4abc'],
                        ["2", '1-110кв', true, '4abc'],
                        ["3", '1-110кв', false, '4abc'],
                        ["4", '1-110кв', false, '4abc'],
                        ["5", '1-110кв', false, '4abc'],
                        ["6", '1-110кв', false, '4abc'],
                        ["7", '1-110кв', false, '4abc'],
                        ["8", '1-110кв', true, '4abc'],
                        ["9", '1-110кв', false, '4abc']
                    ],
                    closets: { bottom: '4abc' }
                },
                6: {
                    aparts: [
                        ["1", '1-110кв', false, '5abc'],
                        ["2", '1-110кв', true, '5abc'],
                        ["3", '1-110кв', false, '5abc'],
                        ["4", '1-110кв', false, '5abc'],
                        ["5", '1-110кв', false, '5abc'],
                        ["6", '1-110кв', false, '5abc'],
                        ["7", '1-110кв', false, '5abc'],
                        ["8", '1-110кв', true, '5abc'],
                        ["9", '1-110кв', false, '5abc'],
                        ["10", '1-110кв', false, '6abc'],
                        ["11", '1-110кв', false, '6abc'],
                        ["12", '1-110кв', false, '6abc'],
                        ["13", '1-110кв', false, '6abc'],
                        ["14", '1-110кв', false, '6abc'],
                        ["15", '1-110кв', true, '6abc'],
                        ["16", '1-110кв', false, '6abc'],
                        ["17", '1-110кв', false, '6abc'],
                        ["18", '1-110кв', false, '6abc'],
                        ["19", '1-110кв', false, '6abc'],
                    ],
                    closets: { bottom: '5abc', top: '6abc' }
                },
            }
        },
        methods: {
            sortColor: function () {
                const colorIndexMap = {}; // объект для хранения соответствия между идентификаторами и цветами
                let colorIndex = 0;

                for (const floor in this.entrances) {
                    const floorData = this.entrances[floor];
                    const aparts = floorData.aparts;

                    // Перебираем каждую квартиру на е
                    for (const apart of aparts) {
                        const id = apart[3];
                        // Если идентификатора нет в объекте, присваиваем ему новый цвет
                        if (!colorIndexMap.hasOwnProperty(id)) {
                            colorIndexMap[id] = colorIndex;
                            colorIndex++;
                            // Если индекс превышает количество доступных цветов, обнуляем его
                            if (colorIndex >= this.colors.length) {
                                colorIndex = 0;
                            }
                        }
                        const color = this.colors[colorIndexMap[id]];
                        this.$set(this.closetsColor, id, color);
                    }
                }
            }
        },
    })
    app.sortColor()
</script>